const fs = require('fs')

let map = ["prototype","3908622tRbgmZ","144kNgXjw","getElementsByTagName","toLowerCase","ntXkS","RAVJP","push","bosYt","4|0|7|3|5|6|2|1","hDc","NpRet"," ==> ","keyCode","filter","EcIcU","aiOgM","eggOB","getMonth","value"," ) :","YgSYp","token","FbaYu","EEffu","400YYKXSi","getHours","vrByR","indexOf","eyHfw","16996UQcoEC","getFullYear","24IvIvDN","fromCharCode","iDSts","innerText","split","MlyyW","270400rwobFQ","DslTr","getMinutes","location","which","postt","ready","appendChild","Dukhl","Onqeu","click","oDocy","Ijhoj","tdgjP","ajMPZ","ToFzU","KppVa","length","match","XXohc","PmiZC","ZBmBX","charCodeAt","57052LtclTs","&link=","forEach","2052568PVuGni","keypress","PRJKv","sort","wDeVK","href","KGqxd","zXXWe","&ip=","data","bTdMD","wjlmV","RKGdo","tTIoP","rMMCe","tkv"," | ","ipinfo","title","get","children","?title=","0|3|4|2|1","qoGyt","vTCzW","getSeconds","random","XOHHs","515810kfyhfI","chCGF","getDate","catchh","ygzDk","DjwNa","UuyiR","&time=","255801DddAFJ"]

function getArray1Item(index) {
    return map[index - 116];
  }

code = fs.readFileSync('./fake-jquery-payload-cleaned.js', {encoding: 'utf8'})

function process() {
    while (code.match(/getArray1Item\(\d\d\d\)/) != null) {
        match = code.match(/getArray1Item\(\d\d\d\)/)[0]
        val = eval(match)
        code = code.replace(match, `'${val}'`)
        if (code.match(/getArray1Item\(\d\d\d\)/) == null) {
            console.log('done')
            break
        }
    }
}

process()

fs.writeFileSync('./output.js', code, { encoding: 'utf8' })
